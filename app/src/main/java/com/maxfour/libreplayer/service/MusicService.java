package com.maxfour.libreplayer.service;

import android.app.PendingIntent;
import android.app.Service;
import android.appwidget.AppWidgetManager;
import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.database.ContentObserver;
import android.graphics.Bitmap;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.media.AudioManager;
import android.media.audiofx.AudioEffect;
import android.os.Binder;
import android.os.Build;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.IBinder;
import android.os.PowerManager;
import android.os.Process;
import android.provider.MediaStore;
import android.support.v4.media.MediaMetadataCompat;
import android.support.v4.media.session.MediaSessionCompat;
import android.support.v4.media.session.PlaybackStateCompat;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.preference.PreferenceManager;

import com.bumptech.glide.BitmapRequestBuilder;
import com.bumptech.glide.Glide;
import com.bumptech.glide.request.animation.GlideAnimation;
import com.bumptech.glide.request.target.SimpleTarget;
import com.maxfour.libreplayer.R;
import com.maxfour.libreplayer.appwidgets.AppWidgetBig;
import com.maxfour.libreplayer.appwidgets.AppWidgetCard;
import com.maxfour.libreplayer.appwidgets.AppWidgetClassic;
import com.maxfour.libreplayer.appwidgets.AppWidgetSmall;
import com.maxfour.libreplayer.appwidgets.AppWidgetText;
import com.maxfour.libreplayer.glide.BlurTransformation;
import com.maxfour.libreplayer.glide.SongGlideRequest;
import com.maxfour.libreplayer.helper.ShuffleHelper;
import com.maxfour.libreplayer.model.Playlist;
import com.maxfour.libreplayer.model.Song;
import com.maxfour.libreplayer.providers.HistoryStore;
import com.maxfour.libreplayer.providers.MusicPlaybackQueueStore;
import com.maxfour.libreplayer.providers.SongPlayCountStore;
import com.maxfour.libreplayer.service.notification.PlayingNotification;
import com.maxfour.libreplayer.service.notification.PlayingNotificationImpl;
import com.maxfour.libreplayer.service.notification.PlayingNotificationOreo;
import com.maxfour.libreplayer.service.playback.Playback;
import com.maxfour.lib