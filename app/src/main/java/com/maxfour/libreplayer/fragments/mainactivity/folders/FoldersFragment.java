package com.maxfour.libreplayer.fragments.mainactivity.folders;

import android.app.ActivityOptions;
import android.app.Dialog;
import android.content.Context;
import android.content.res.ColorStateList;
import android.media.MediaScannerConnection;
import android.os.Bundle;
import android.os.Environment;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.MimeTypeMap;
import android.widget.PopupMenu;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.appcompat.widget.Toolbar;
import androidx.loader.app.LoaderManager;
import androidx.loader.content.Loader;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.afollestad.materialcab.MaterialCab;
import com.google.android.material.appbar.AppBarLayout;
import com.google.android.material.card.MaterialCardView;
import com.google.android.material.dialog.MaterialAlertDialogBuilder;
import com.google.android.material.snackbar.Snackbar;
import com.maxfour.appthemehelper.ThemeStore;
import com.maxfour.appthemehelper.common.ATHToolbarActivity;
import com.maxfour.appthemehelper.util.ATHUtil;
import com.maxfour.appthemehelper.util.ToolbarContentTintHelper;
import com.maxfour.libreplayer.R;
import com.maxfour.libreplayer.adapter.SongFileAdapter;
import com.maxfour.libreplayer.dialogs.OptionsSheetDialogFragment;
import com.maxfour.libreplayer.fragments.base.AbsMainActivityFragment;
import com.maxfour.libreplayer.helper.MusicPlayerRemote;
import com.maxfour.libreplayer.helper.menu.SongMenuHelper;
import com.maxfour.libreplayer.helper.menu.SongsMenuHelper;
import com.maxfour.libreplayer.interfaces.CabHolder;
import com.maxfour.libreplayer.interfaces.LoaderIds;
import com.maxfour.libreplayer.interfaces.MainActivityFragmentCallbacks;
import com.maxfour.libreplayer.misc.DialogAsyncTask;
import com.maxfour.libreplayer.misc.UpdateToastMediaScannerCompletionListener;
import com.maxfour.libreplayer.misc.WrappedAsyncTaskLoader;
import com.maxfour.libreplayer.model.Song;
import com.maxfour.libreplayer.util.DensityUtil;
import com.maxfour.libreplayer.util.FileUtil;
import com.maxfour.libreplayer.util.NavigationUtil;
import com.maxfour.libreplayer.util.PlayerColorUtil;
import com.maxfour.libreplayer.util.PreferenceUtil;
import com.maxfour.libreplayer.util.ViewUtil;
import com.maxfour.libreplayer.views.BreadCrumbLayout;
import com.simplecityapps.recyclerview_fastscroll.views.FastScrollRecy